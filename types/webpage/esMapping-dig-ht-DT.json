{
  "mappings": {
    "offer": {
      "_timestamp": {
        "enabled": true,
        "store": true
      },
      "properties": {
        "@context": {
          "type": "string",
          "index": "not_analyzed"
        },
        "a": {
          "type": "string",
          "index": "not_analyzed"
        },
        "availableAtOrFrom": {
          "type": "nested",
          "properties": {
            "a": {
              "type": "string",
              "index": "not_analyzed"
            },
            "address": {
              "type": "nested",
              "properties": {
                "a": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "addressCountry": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "addressLocality": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "addressRegion": {
                  "type": "string",
                  "index": "not_analyzed"
                }
              }
            },
            "geo": {
              "type": "nested",
              "properties": {
                "a": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "lat": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "lon": {
                  "type": "string",
                  "index": "not_analyzed"
                }
              }
            },
            "name": {
              "type": "string",
              "index": "not_analyzed"
            },
            "uri": {
              "type": "string",
              "index": "not_analyzed"
            }
          }
        },
        "itemOffered": {
          "type": "nested",
          "properties": {
            "a": {
              "type": "string",
              "index": "not_analyzed"
            },
            "eyeColor": {
              "type": "string"
            },
            "hairColor": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "offers": {
              "type": "string",
              "index": "not_analyzed"
            },
            "personAge": {
              "type": "string"
            },
            "uri": {
              "type": "string",
              "index": "not_analyzed"
            }
          }
        },
        "mainEntityOfPage": {
          "type": "nested",
          "properties": {
            "a": {
              "type": "string",
              "index": "not_analyzed"
            },
            "description": {
              "type": "string"
            },
            "publisher": {
              "type": "nested",
              "properties": {
                "a": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "name": {
                  "type": "string",
                  "index": "not_analyzed"
                }
              }
            },
            "mainEntity": {
              "type": "string",
              "index": "not_analyzed"
            },
            "uri": {
              "type": "string",
              "index": "not_analyzed"
            },
            "url": {
              "type": "string",
              "index": "not_analyzed"
            }
          }
        },
        "priceSpecification": {
          "type": "nested",
          "properties": {
            "a": {
              "type": "string",
              "index": "not_analyzed"
            },
            "billingIncrement": {
              "type": "string",
              "index": "not_analyzed"
            },
            "name": {
              "type": "string",
              "index": "not_analyzed"
            },
            "price": {
              "type": "string"
            },
            "unitCode": {
              "type": "string",
              "index": "not_analyzed"
            },
            "uri": {
              "type": "string",
              "index": "not_analyzed"
            }
          }
        },
        "seller": {
          "type": "nested",
          "properties": {
            "a": {
              "type": "string",
              "index": "not_analyzed"
            },
            "email": {
              "properties": {
                "a": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "owner": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "name": {
                  "type": "string",
                  "index": "not_analyzed",
                  "fields": {
                    "partial": {
                      "type": "string",
                      "analyzer": "partial_email_analyzer"
                    },
                    "exact": {
                      "type": "string",
                      "analyzer": "exact_email_analyzer"
                    }
                  }
                },
                "uri": {
                  "type": "string",
                  "index": "not_analyzed"
                }
              }
            },
            "makesOffer": {
              "type": "string",
              "index": "not_analyzed"
            },
            "telephone": {
              "type": "nested",
              "properties": {
                "a": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "owner": {
                  "type": "string",
                  "index": "not_analyzed"
                },
                "name": {
                  "type": "string",
                  "fields": {
                    "partial": {
                      "type": "string",
                      "analyzer": "partial_phone_analyzer"
                    },
                    "exact": {
                      "type": "string",
                      "analyzer": "exact_phone_analyzer"
                    }
                  }
                },
                "uri": {
                  "type": "string",
                  "index": "not_analyzed"
                }
              }
            },
            "uri": {
              "type": "string",
              "index": "not_analyzed"
            }
          }
        },
        "title": {
          "type": "string"
        },
        "uri": {
          "type": "string",
          "index": "not_analyzed"
        }
      }
    }
  },
  "settings": {
    "index": {
      "number_of_replicas": "1",
      "number_of_shards": "20"
    },
    "analysis": {
      "analyzer": {
        "partial_phone_analyzer": {
          "tokenizer": "keyword",
          "char_filter": [
            "digits_only"
          ],
          "filter": [
            "ngram_3_10"
          ]
        },
        "exact_phone_analyzer": {
          "tokenizer": "keyword",
          "char_filter": [
            "digits_only"
          ]
        },
        "exact_email_analyzer": {
          "tokenizer": "uax_url_email",
          "filter": [
            "email_splitting_filter_keep_original",
            "lowercase",
            "unique"
          ]
        },
        "partial_email_analyzer": {
          "tokenizer": "uax_url_email",
          "filter": [
            "ngram_5_8"
          ]
        }
      },
      "filter": {
        "filter_stemmer": {
          "type": "porter_stem",
          "language": "English"
        },
        "shingle_filter_2_4": {
          "type": "shingle",
          "min_shingle_size": 2,
          "max_shingle_size": 4,
          "output_unigrams": false
        },
        "shingle_filter_4": {
          "type": "shingle",
          "min_shingle_size": 4,
          "max_shingle_size": 4,
          "output_unigrams": false
        },
        "email_splitting_filter_keep_original": {
          "type": "pattern_capture",
          "preserve_original": 1,
          "patterns": [
            "(.+)@",
            "@(.+)"
          ]
        },
        "email_splitting_filter": {
          "type": "pattern_capture",
          "preserve_original": 0,
          "patterns": [
            "(.+)@",
            "@(.+)"
          ]
        },
        "ngram_3_10": {
          "type": "nGram",
          "min_gram": 3,
          "max_gram": 10
        },
        "ngram_5_8": {
          "type": "nGram",
          "min_gram": 5,
          "max_gram": 8
        }
      },
      "char_filter": {
        "digits_only": {
          "type": "pattern_replace",
          "pattern": "(\\D)",
          "replacement": ""
        }
      }
    }
  }
}